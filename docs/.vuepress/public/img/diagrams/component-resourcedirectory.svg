<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2480 2102"><g transform="translate(255 581)"><rect width="1240" height="1013" rx="0" ry="0" fill="#fff" stroke="#444" stroke-width="2" stroke-dasharray="20, 20" pointer-events="none"/><text font-size="24" y="974" fill="#444" x="10" pointer-events="visible" font-family="'Open Sans'" transform="translate(15)"><tspan dy="0em" x="0">Resource Directory</tspan></text><text font-size="19" y="998" fill="#444" x="10" pointer-events="visible" font-family="'Open Sans'" transform="translate(15)"><tspan dy="0em" x="0">[Container]</tspan></text></g><g transform="translate(275 1)"><rect rx="1" ry="1" stroke="#80b3cb" stroke-width="2" pointer-events="visiblePainted" fill="#8ec7e1" width="450" height="300"/><text font-size="34" y=".8em" font-weight="bold" text-anchor="middle" pointer-events="visible" font-family="'Open Sans'" transform="translate(225 77.5)"><tspan dy="0em" x="0">Protocol Adapter</tspan></text><text font-size="19" y=".8em" text-anchor="middle" font-family="'Open Sans'" transform="translate(225 117.5)"><tspan dy="0em" x="0">from CoAP Gateway</tspan><tspan dy="1.2em" x="0">[Component]</tspan></text><text font-size="24" y=".8em" text-anchor="middle" font-family="'Open Sans'" transform="translate(225 192.5)"><tspan dy="0em" x="0">Translates OCF protocol</tspan></text><image/></g><g transform="translate(1025 601)"><rect rx="1" ry="1" stroke="#80b3cb" stroke-width="2" pointer-events="visiblePainted" fill="#8ec7e1" width="450" height="300"/><text font-size="34" y=".8em" font-weight="bold" text-anchor="middle" pointer-events="visible" font-family="'Open Sans'" transform="translate(225 75)"><tspan dy="0em" x="0">Projections Component</tspan></text><text font-size="19" y=".8em" text-anchor="middle" font-family="'Open Sans'" transform="translate(225 115)"><tspan dy="0em" x="0">[Component]</tspan></text><text font-size="24" y=".8em" text-anchor="middle" font-family="'Open Sans'" transform="translate(225 165)"><tspan dy="0em" x="0">Builds and maintains device and</tspan><tspan dy="1.2em" x="0">resource projections</tspan></text><image/></g><g transform="translate(1025 1)"><rect rx="1" ry="1" stroke="#80b3cb" stroke-width="2" pointer-events="visiblePainted" fill="#8ec7e1" width="450" height="300"/><text font-size="34" y=".8em" font-weight="bold" text-anchor="middle" pointer-events="visible" font-family="'Open Sans'" transform="translate(225 77.5)"><tspan dy="0em" x="0">Protocol Adapter</tspan></text><text font-size="19" y=".8em" text-anchor="middle" font-family="'Open Sans'" transform="translate(225 117.5)"><tspan dy="0em" x="0">from gRPC Gateway</tspan><tspan dy="1.2em" x="0">[Component]</tspan></text><text font-size="24" y=".8em" text-anchor="middle" font-family="'Open Sans'" transform="translate(225 192.5)"><tspan dy="0em" x="0">Translates public gRPC protocol</tspan></text><image/></g><g transform="translate(1775 601)"><rect rx="1" ry="1" stroke="#c7c7c7" stroke-width="2" pointer-events="visiblePainted" fill="#ddd" width="450" height="300"/><text font-size="34" y=".8em" font-weight="bold" text-anchor="middle" pointer-events="visible" font-family="'Open Sans'" transform="translate(225 75)"><tspan dy="0em" x="0">Authorization Server</tspan></text><text font-size="19" y=".8em" text-anchor="middle" font-family="'Open Sans'" transform="translate(225 115)"><tspan dy="0em" x="0">[Software System]</tspan></text><text font-size="24" y=".8em" text-anchor="middle" font-family="'Open Sans'" transform="translate(225 165)"><tspan dy="0em" x="0">An OAuth2.0 server authorizing and</tspan><tspan dy="1.2em" x="0">storing users and devices identities</tspan></text><image/></g><g transform="translate(1775 1)"><rect rx="1" ry="1" stroke="#80b3cb" stroke-width="2" pointer-events="visiblePainted" fill="#8ec7e1" width="450" height="300"/><text font-size="34" y=".8em" font-weight="bold" text-anchor="middle" pointer-events="visible" font-family="'Open Sans'" transform="translate(225 77.5)"><tspan dy="0em" x="0">Protocol Adapter</tspan></text><text font-size="19" y=".8em" text-anchor="middle" font-family="'Open Sans'" transform="translate(225 117.5)"><tspan dy="0em" x="0">from HTTP Gateway</tspan><tspan dy="1.2em" x="0">[Component]</tspan></text><text font-size="24" y=".8em" text-anchor="middle" font-family="'Open Sans'" transform="translate(225 192.5)"><tspan dy="0em" x="0">Translates HTTP protocol</tspan></text><image/></g><g transform="translate(275 1201)"><rect rx="1" ry="1" stroke="#80b3cb" stroke-width="2" pointer-events="visiblePainted" fill="#8ec7e1" width="450" height="300"/><text font-size="34" y=".8em" font-weight="bold" text-anchor="middle" pointer-events="visible" font-family="'Open Sans'" transform="translate(225 75)"><tspan dy="0em" x="0">Event Bus Component</tspan></text><text font-size="19" y=".8em" text-anchor="middle" font-family="'Open Sans'" transform="translate(225 115)"><tspan dy="0em" x="0">[Component]</tspan></text><text font-size="24" y=".8em" text-anchor="middle" font-family="'Open Sans'" transform="translate(225 165)"><tspan dy="0em" x="0">Subsribes to projections relevant</tspan><tspan dy="1.2em" x="0">events</tspan></text><image/></g><g transform="translate(1025 1201)"><rect rx="1" ry="1" stroke="#80b3cb" stroke-width="2" pointer-events="visiblePainted" fill="#8ec7e1" width="450" height="300"/><text font-size="34" y=".8em" font-weight="bold" text-anchor="middle" pointer-events="visible" font-family="'Open Sans'" transform="translate(225 90)"><tspan dy="0em" x="0">Event Store Component</tspan></text><text font-size="19" y=".8em" text-anchor="middle" font-family="'Open Sans'" transform="translate(225 130)"><tspan dy="0em" x="0">[Component]</tspan></text><text font-size="24" y=".8em" text-anchor="middle" font-family="'Open Sans'" transform="translate(225 180)"><tspan dy="0em" x="0">Loads events from latest snapshot</tspan></text><image/></g><g transform="translate(1100 1801)"><ellipse id="a" cx="150" cy="270" rx="150" ry="30" stroke="#80b3cb" stroke-width="2" pointer-events="visiblePainted" fill="#8ec7e1"/><path id="b" stroke="#80b3cb" stroke-width="2" pointer-events="visiblePainted" fill="#8ec7e1" d="M0 30h300v240H0z"/><clipPath id="c" clipPathUnits="userSpaceOnUse"><use xlink:href="#a" width="100%" height="100%"/><use xlink:href="#b" width="100%" height="100%"/></clipPath><path clip-path="url(#c)" pointer-events="visiblePainted" fill="#8ec7e1" d="M0 30h300v270H0z"/><ellipse cx="150" cy="30" rx="150" ry="30" stroke="#80b3cb" stroke-width="2" pointer-events="visiblePainted" fill="#8ec7e1"/><text font-size="34" y=".8em" font-weight="bold" text-anchor="middle" pointer-events="visible" font-family="'Open Sans'" transform="translate(150 120)"><tspan dy="0em" x="0">Event Store</tspan></text><text font-size="19" y=".8em" text-anchor="middle" font-family="'Open Sans'" transform="translate(150 160)"><tspan dy="0em" x="0">[Container: MongoDB]</tspan></text><image/></g><g transform="translate(275 1889)"><ellipse id="d" cx="420" cy="62.5" rx="30" ry="62.5" stroke="#80b3cb" stroke-width="2" pointer-events="visiblePainted" fill="#8ec7e1"/><path id="e" stroke="#80b3cb" stroke-width="2" pointer-events="visiblePainted" fill="#8ec7e1" d="M30 0h390v125H30z"/><clipPath id="f" clipPathUnits="userSpaceOnUse"><use xlink:href="#d" width="100%" height="100%"/><use xlink:href="#e" width="100%" height="100%"/></clipPath><path clip-path="url(#f)" pointer-events="visiblePainted" fill="#8ec7e1" d="M30 0h420v125H30z"/><ellipse cx="30" cy="62.5" rx="30" ry="62.5" stroke="#80b3cb" stroke-width="2" pointer-events="visiblePainted" fill="#8ec7e1"/><text font-size="34" y=".8em" font-weight="bold" text-anchor="middle" pointer-events="visible" font-family="'Open Sans'" transform="translate(225 17.5)"><tspan dy="0em" x="0">Event Bus</tspan></text><text font-size="19" y=".8em" text-anchor="middle" font-family="'Open Sans'" transform="translate(225 57.5)"><tspan dy="0em" x="0">[Container: NATS]</tspan></text><image/></g><g transform="translate(0 -703)"><path stroke="#707070" stroke-width="2" stroke-dasharray="30, 30" fill="none" d="M1250 1004v280"/><path fill="#707070" stroke="#707070" d="M1240 1284l10 20 10-20z"/><path fill="none" d="M1250 1004v280"/><g cursor="move"><g transform="translate(1250 1144)" pointer-events="none"><rect fill="#fff" rx="3" ry="3" stroke="#fff" stroke-width="20" width="91.04999" height="33" transform="translate(-45.3 -16.5)"/><text font-size="24" y=".8em" text-anchor="middle" fill="#707070" font-family="'Open Sans'" transform="translate(0 -8.7)"><tspan dy="0em" x="0">Queries</tspan></text></g></g></g><g transform="translate(0 -703)"><path stroke="#707070" stroke-width="2" stroke-dasharray="30, 30" fill="none" d="M1813 1004l-359 288"/><path fill="#707070" stroke="#707070" d="M1447.37042 1283.69737l-9.37043 20.3026 21.86433-4.68522z"/><path fill="none" d="M1813 1004l-359 288"/><g cursor="move"><g transform="translate(1633.5 1148)" pointer-events="none"><rect fill="#fff" rx="3" ry="3" stroke="#fff" stroke-width="20" width="91.04999" height="33" transform="translate(-45.3 -16.5)"/><text font-size="24" y=".8em" text-anchor="middle" fill="#707070" font-family="'Open Sans'" transform="translate(0 -8.7)"><tspan dy="0em" x="0">Queries</tspan></text></g></g></g><g transform="translate(0 -703)"><path stroke="#707070" stroke-width="2" stroke-dasharray="30, 30" fill="none" d="M500 2204v368"/><path fill="#707070" stroke="#707070" d="M490 2572l10 20 10-20z"/><path fill="none" d="M500 2204v368"/><g cursor="move"><g transform="translate(500 2388)" pointer-events="none"><rect fill="#fff" rx="3" ry="3" stroke="#fff" stroke-width="20" width="153.55" height="33" transform="translate(-76.8 -16.5)"/><text font-size="24" y=".8em" text-anchor="middle" fill="#707070" font-family="'Open Sans'" transform="translate(0 -8.7)"><tspan dy="0em" x="0">Subscribes to</tspan></text></g></g></g><g transform="translate(0 -703)"><path stroke="#707070" stroke-width="2" stroke-dasharray="30, 30" fill="none" d="M1250 2204v280"/><path fill="#707070" stroke="#707070" d="M1240 2484l10 20 10-20z"/><path fill="none" d="M1250 2204v280"/><g cursor="move"><g transform="translate(1250 2344)" pointer-events="none"><rect fill="#fff" rx="3" ry="3" stroke="#fff" stroke-width="20" width="148.74998" height="61.8" transform="translate(-73.7 -30.9)"/><text font-size="24" y=".8em" text-anchor="middle" fill="#707070" font-family="'Open Sans'" transform="translate(0 -23.1)"><tspan dy="0em" x="0">Loads events</tspan><tspan dy="1.2em" x="0">from</tspan></text></g></g></g><g transform="translate(0 -703)"><path stroke="#707070" stroke-width="2" stroke-dasharray="30, 30" fill="none" d="M688 1004l359 288"/><path fill="#707070" stroke="#707070" d="M1041.1356 1299.31483l21.86433 4.68521-9.37042-20.30259z"/><path fill="none" d="M688 1004l359 288"/><g cursor="move"><g transform="translate(867.5 1148)" pointer-events="none"><rect fill="#fff" rx="3" ry="3" stroke="#fff" stroke-width="20" width="91.04999" height="33" transform="translate(-45.3 -16.5)"/><text font-size="24" y=".8em" text-anchor="middle" fill="#707070" font-family="'Open Sans'" transform="translate(0 -8.7)"><tspan dy="0em" x="0">Queries</tspan></text></g></g></g><g transform="translate(0 -703)"><path stroke="#707070" stroke-width="2" stroke-dasharray="30, 30" fill="none" d="M1475 1454h280"/><path fill="#707070" stroke="#707070" d="M1755 1464l20-10-20-10z"/><path fill="none" d="M1475 1454h280"/><g cursor="move"><g transform="translate(1615 1454)" pointer-events="none"><rect fill="#fff" rx="3" ry="3" stroke="#fff" stroke-width="20" width="167.25" height="61.8" transform="translate(-82.8 -30.9)"/><text font-size="24" y=".8em" text-anchor="middle" fill="#707070" font-family="'Open Sans'" transform="translate(0 -23.1)"><tspan dy="0em" x="0">Authorizes</tspan><tspan dy="1.2em" x="0">requests using</tspan></text></g></g></g><g transform="translate(0 -703)"><path stroke="#707070" stroke-width="2" stroke-dasharray="30, 30" fill="none" d="M1063 1604l-359 288"/><path fill="#707070" stroke="#707070" d="M697.37041 1883.69736L688 1903.99995l21.86432-4.68522z"/><path fill="none" d="M1063 1604l-359 288"/><g cursor="move"><g transform="translate(883.5 1748)" pointer-events="none"><rect fill="#fff" rx="3" ry="3" stroke="#fff" stroke-width="20" width="56.5" height="33" transform="translate(-27.7 -16.5)"/><text font-size="24" y=".8em" text-anchor="middle" fill="#707070" font-family="'Open Sans'" transform="translate(0 -8.7)"><tspan dy="0em" x="0">Uses</tspan></text></g></g></g><g transform="translate(0 -703)"><path stroke="#707070" stroke-width="2" stroke-dasharray="30, 30" fill="none" d="M1250 1604v280"/><path fill="#707070" stroke="#707070" d="M1240 1884l10 20 10-20z"/><path fill="none" d="M1250 1604v280"/><g cursor="move"><g transform="translate(1250 1744)" pointer-events="none"><rect fill="#fff" rx="3" ry="3" stroke="#fff" stroke-width="20" width="56.5" height="33" transform="translate(-27.7 -16.5)"/><text font-size="24" y=".8em" text-anchor="middle" fill="#707070" font-family="'Open Sans'" transform="translate(0 -8.7)"><tspan dy="0em" x="0">Uses</tspan></text></g></g></g></svg>